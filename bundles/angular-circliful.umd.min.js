!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-circliful",["exports","@angular/core","rxjs","@angular/common"],t):t((e=e||self)["angular-circliful"]={},e.ng.core,e.rxjs,e.ng.common)}(this,(function(e,t,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(e,t,r,n){var i,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(o<3?i(c):o>3?i(t,r,c):i(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return c}var a=function(){function e(){this.circleValues=new r.BehaviorSubject({percent:{value:60,color:"blue"}})}var n;return n=e,e.polarToCartesian=function(e,t,r,n){var i=(n-90)*Math.PI/180;return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}},e.prototype.describeArc=function(e,t,r){var i=e/2,o=e/2,c=e/2.2,a=n.polarToCartesian(i,o,c,r),s=n.polarToCartesian(i,o,c,t),l=r-t<=180?"0":"1",u=!1;return 360===r&&s.x>a.x&&(u=!0,a.x=a.x-.001),["M",a.x,a.y,"A",c,c,0,l,0,s.x,s.y,u?"Z":""].join(" ")},e.prototype.updateCircleValues=function(e){this.circleValues.next(e)},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e=n=i([t.Injectable({providedIn:"root"})],e)}(),s=function(){function e(e){this.circleService=e}return e.prototype.ngOnChanges=function(){var e=void 0===this.customClasses?{}:this.customClasses,t={percent:this.percent,color:this.color,strokeWidth:this.strokeWidth,strokeLinecap:this.strokeLinecap,progressColors:this.progressColors,animate:this.animate,animateInView:this.animateInView,backgroundCircle:this.backgroundCircle,customClasses:e,angle:this.angle};this.gradient&&this.gradient.startColor&&this.gradient.endColor&&(t.gradient=this.gradient),this.icon&&this.icon.iconClass&&(t.icon=this.icon),this.text&&this.text.content&&(t.text=this.text),this.point&&this.point.color&&(t.point=this.point),this.circleService.updateCircleValues(t)},e.ctorParameters=function(){return[{type:a}]},i([t.Input()],e.prototype,"percent",void 0),i([t.Input()],e.prototype,"color",void 0),i([t.Input()],e.prototype,"gradient",void 0),i([t.Input()],e.prototype,"strokeWidth",void 0),i([t.Input()],e.prototype,"strokeLinecap",void 0),i([t.Input()],e.prototype,"progressColors",void 0),i([t.Input()],e.prototype,"animate",void 0),i([t.Input()],e.prototype,"animateInView",void 0),i([t.Input()],e.prototype,"angle",void 0),i([t.Input()],e.prototype,"backgroundCircle",void 0),i([t.Input()],e.prototype,"icon",void 0),i([t.Input()],e.prototype,"text",void 0),i([t.Input()],e.prototype,"point",void 0),i([t.Input()],e.prototype,"customClasses",void 0),e=i([t.Component({selector:"ac-angular-circliful",template:"<ac-svg-container></ac-svg-container>\n",encapsulation:t.ViewEncapsulation.None})],e)}(),l=function(){function e(e){this.circleService=e}var r;return r=e,e.getMilliseconds=function(e,t){var r=e||50;return t<=180&&(r/=3),r},e.setAttributes=function(e,t){var r,n;try{for(var i=o(Object.entries(t)),a=i.next();!a.done;a=i.next()){var s=c(a.value,2),l=s[0],u=s[1];e.setAttribute(l,u)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.removeAttribute=function(e,t){e.removeAttribute(t)},e.prototype.animateArc=function(e){var t=this,n=e.arc,i=e.arcParams,o=e.progressColors,c=r.getMilliseconds(i.ms,i.endAngleGrade),a=Array.isArray(o)&&o.length>0;r.removeAttribute(n,"style");var s=1,l=setInterval((function(){var c=3.6*s;r.setAttributes(n,{d:t.circleService.describeArc(e.maxSize,0,c)}),a&&t.updateCircleColor(s,n,o),++s>i.percent&&clearInterval(l)}),c)},e.prototype.updateCircleColor=function(e,t,n){var i=n.find((function(t){return t.percent===e}));i?r.setAttributes(t,{style:"stroke: "+i.color}):void 0!==i&&i.percent<e&&r.removeAttribute(t,"style")},e.prototype.isElementInViewport=function(e){var t=e.offsetTop,r=window.scrollY,n=window.innerHeight;return r<t&&r+n>t},e.ctorParameters=function(){return[{type:a}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](a))},token:e,providedIn:"root"}),e=r=i([t.Injectable({providedIn:"root"})],e)}(),u=function(){function e(e,t,r){this.circleService=e,this.changeDetectorRef=t,this.styleService=r,this.coordinates={x:0,y:0},this.radius=0,this.backgroundCircleColor="#333",this.backgroundCircleWidth=10,this.textPosition="middle"}return e.prototype.ngOnInit=function(){var e=this;this.circleService.circleValues.subscribe((function(t){e.circleValues=t,e.size={height:200,maxSize:200,width:200},e.updatePercent(),e.animateCircle(),e.animateCircleInView()}))},e.prototype.updatePercent=function(){var e,t,r,n,i=this.circleValues.percent.value,o=(null!==(t=null===(e=this.circleValues.angle)||void 0===e?void 0:e.end)&&void 0!==t?t:360)/100*i,c=null!==(n=null===(r=this.circleValues.angle)||void 0===r?void 0:r.start)&&void 0!==n?n:0;this.viewBox="0 0 "+this.size.width+" "+this.size.height,this.coordinates={x:this.size.maxSize/2,y:this.size.maxSize/2},this.radius=this.size.maxSize/2.2,this.arcData=this.circleService.describeArc(this.size.maxSize,c,o),this.changeDetectorRef.detectChanges()},e.prototype.animateCircle=function(){var e=this.svgContainer.nativeElement.getElementsByTagName("path");this.circleValues.animate&&this.styleService.animateArc({arc:e[0],arcParams:{percent:this.circleValues.percent.value,x:this.coordinates.x,y:this.coordinates.y,radius:this.radius},maxSize:this.size.maxSize,progressColors:this.circleValues.progressColors})},e.prototype.animateCircleInView=function(){var e=this;this.circleValues.animateInView&&window.addEventListener("scroll",(function(){e.checkAnimation()}))},e.prototype.checkAnimation=function(){var e=this,t=this.svgContainer.nativeElement.parentElement,r=this.styleService.isElementInViewport(t);!t.classList.contains("reanimated")&&r&&(t.classList.add("reanimated"),setTimeout((function(){return e.animateCircle()}),250))},e.ctorParameters=function(){return[{type:a},{type:t.ChangeDetectorRef},{type:l}]},i([t.ViewChild("svgContainer")],e.prototype,"svgContainer",void 0),e=i([t.Component({selector:"ac-svg-container",template:'<svg\n  #svgContainer\n  width="100%"\n  height="100%"\n  [attr.viewBox]="viewBox"\n  [ngClass]="circleValues.customClasses.svgContainer"\n>\n  <defs *ngIf="circleValues.gradient">\n    <linearGradient id="linearGradient">\n      <stop\n        offset="0"\n        [attr.stop-color]="circleValues.gradient.startColor">\n      </stop>\n      <stop\n        offset="1"\n        [attr.stop-color]="circleValues.gradient.endColor">\n      </stop>\n    </linearGradient>\n  </defs>\n\n  <circle *ngIf="circleValues.backgroundCircle.color"\n    class="background-circle"\n    [ngClass]="circleValues.customClasses.backgroundCircle"\n    [attr.stroke]="circleValues.backgroundCircle.color ? circleValues.backgroundCircle.color : backgroundCircleColor"\n    [attr.stroke-width]="circleValues.backgroundCircle.strokeWidth ? circleValues.backgroundCircle.strokeWidth : backgroundCircleWidth"\n    [attr.cx]="coordinates.x"\n    [attr.cy]="coordinates.y"\n    [attr.r]="radius">\n  </circle>\n\n  <circle\n    *ngIf="circleValues.point"\n    [ngClass]="circleValues.customClasses.point"\n    [attr.cx]="coordinates.x"\n    [attr.cy]="coordinates.y"\n    [attr.r]="circleValues.point.radius ? circleValues.point.radius : radius"\n    [attr.fill]="circleValues.point.color ? circleValues.point.color : \'none\'">\n  </circle>\n\n  <text\n    *ngIf="circleValues.icon"\n    [attr.text-anchor]="circleValues.icon.position ? circleValues.icon.position : \'middle\'"\n    [attr.x]="circleValues.icon.x ? circleValues.icon.x : coordinates.x"\n    [attr.y]="circleValues.icon.y ? circleValues.icon.y : coordinates.y"\n    [ngClass]="[circleValues.icon.iconClass, \'fa\']">\n  </text>\n\n  <text\n    *ngIf="circleValues.percent"\n    id="percent"\n    [attr.text-anchor]="textPosition"\n    [attr.x]="coordinates.x + (circleValues.percent.x ? circleValues.percent.x : 0)"\n    [attr.y]="coordinates.y + (circleValues.percent.y ? circleValues.percent.y : 0)"\n    [attr.fill]="circleValues.percent.color"\n    [ngClass]="circleValues.customClasses.percent">\n    {{(circleValues.percent.value ? circleValues.percent.value : circleValues.percent) + (circleValues.percent.noPercentageSign ? \'\' : \'%\')}}\n  </text>\n\n  <text\n    *ngIf="circleValues.text"\n    [attr.text-anchor]="circleValues.text.position ? circleValues.text.position : textPosition"\n    [attr.x]="circleValues.text.x ? circleValues.text.x : coordinates.x"\n    [attr.y]="circleValues.text.y ? circleValues.text.y : (coordinates.y + 15)"\n    [ngClass]="circleValues.customClasses.text">\n    {{circleValues.text.content}}\n  </text>\n\n  <path\n    class="foreground-circle"\n    [ngClass]="circleValues.customClasses.foregroundCircle"\n    [attr.d]="arcData"\n    [attr.stroke-width]="circleValues.strokeWidth + \'px\'"\n    [attr.stroke-linecap]="circleValues.strokeLinecap"\n    [attr.stroke]="circleValues.gradient ? \'url(#linearGradient)\' : circleValues.color">\n  </path>\n</svg>\n',encapsulation:t.ViewEncapsulation.None,styles:[".background-circle,.foreground-circle{fill:none}"]})],e)}(),p=function(){function e(){}return e=i([t.NgModule({declarations:[s,u],imports:[n.CommonModule],exports:[s],schemas:[t.NO_ERRORS_SCHEMA]})],e)}();e.AngularCirclifulComponent=s,e.AngularCirclifulModule=p,e.ɵa=a,e.ɵb=u,e.ɵc=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-circliful.umd.min.js.map